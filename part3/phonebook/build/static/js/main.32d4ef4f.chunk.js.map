{"version":3,"sources":["services/data.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","console","log","put","delete","Filter","persons","newSearchField","handleFilter","objs","filter","person","name","toLowerCase","includes","value","onChange","map","e","number","PersonForm","newName","newNumber","hNumChange","hNameChange","hAdd","onSubmit","type","Person","handleDelete","i","DeleteButton","onClick","Notification","message","style","App","basic_style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","error_style","borderRadiuss","useState","setPersons","setNewName","setNewNumber","setSearchField","Message","setMessage","setStyle","useEffect","dataService","event","filterStr","target","preventDefault","newPerson","window","confirm","setTimeout","catch","error","concat","JSON","stringify","ReactDOM","render","document","getElementById"],"mappings":"iKACMA,EAAW,eA0BF,EAxBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAsB5B,EAnBA,SAAAC,GAEb,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAiB5B,EAdA,SAACG,EAAIF,GAGlB,OAFAG,QAAQC,IAAI,SAAUF,EAAIF,GACVL,IAAMU,IAAN,UAAaX,EAAb,YAAwBQ,GAAMF,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAW5B,EARA,SAACG,GAEd,OADgBP,IAAMW,OAAN,UAAgBZ,EAAhB,YAA2BQ,IAC5BL,MAAK,SAAAC,GAElB,OADAK,QAAQC,IAAI,iBAAkBN,GACtBA,EAASC,S,OCnBfQ,EAAS,SAAC,GAA4C,IAA3CC,EAA0C,EAA1CA,QAASC,EAAiC,EAAjCA,eAAgBC,EAAiB,EAAjBA,aACxCP,QAAQC,IAAI,2BAA4BI,GAExC,IAAMG,EAAOH,EAAQI,QAAO,SAAAC,GAAM,OAAEA,EAAOC,KAAKC,cAAcC,SAASP,EAAeM,kBACtF,OACE,oDACmB,uBAAOE,MAAOR,EAAgBS,SAAUR,IACxDC,EAAKQ,KAAI,SAAAC,GAAC,OAAE,8BAAiBA,EAAEN,KAAnB,IAA0BM,EAAEC,SAApBD,EAAEN,aAIvBQ,EAAa,SAAC,GAAuD,IAAtDC,EAAqD,EAArDA,QAASC,EAA4C,EAA5CA,UAAWC,EAAiC,EAAjCA,WAAYC,EAAqB,EAArBA,YAAaC,EAAQ,EAARA,KAChE,OACE,uBAAMC,SAAUD,EAAhB,UACE,yCACQ,uBACNV,MAAOM,EACPL,SAAUQ,OAGZ,2CACU,uBACRT,MAAOO,EACPN,SAAUO,OAGZ,8BACE,wBAAQI,KAAK,SAAb,uBAKFC,EAAS,SAAC,GAA4B,IAA3BtB,EAA0B,EAA1BA,QAASuB,EAAiB,EAAjBA,aACxB,OACE,8BACCvB,EAAQW,KAAI,SAACN,EAAOmB,GAAR,OACb,cAAC,EAAD,CAAsBnB,OAAQA,EAAQkB,aAAc,kBAAIA,EAAalB,KAAlDmB,SAKjBC,EAAe,SAAC,GAA2B,IAA1BpB,EAAyB,EAAzBA,OAAQkB,EAAiB,EAAjBA,aAE7B,OADA5B,QAAQC,IAAI,eAAgBS,GAE1B,8BACGA,EAAOC,KADV,IACiBD,EAAOQ,OAAO,wBAAQa,QAASH,EAAjB,wBAI7BI,EAAe,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,MAC/B,OAAgB,OAAZD,EACK,KAGP,qBAAKC,MAAOA,EAAZ,SACGD,KA2JQE,EAvJH,WACV,IAAMC,EAAa,CACjBC,MAAO,QACPC,WAAY,YACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,IAEVC,EAAa,CACjBP,MAAO,MACPC,WAAY,YACZC,SAAU,GACVC,YAAa,QACbK,cAAe,EACfH,QAAS,GACTC,aAAc,IAEhB,EAAgCG,mBAAS,IAAzC,mBAAQzC,EAAR,KAAiB0C,EAAjB,KAMA,EAAgCD,mBAAS,IAAzC,mBAAQ1B,EAAR,KAAiB4B,EAAjB,KACA,EAAoCF,mBAAS,IAA7C,mBAAQzB,EAAR,KAAmB4B,EAAnB,KACA,EAA2CH,mBAAS,IAApD,mBAAQxC,EAAR,KAAwB4C,EAAxB,KACA,EAA+BJ,mBAAS,MAAxC,mBAAQK,EAAR,KAAiBC,EAAjB,KACA,EAA2BN,mBAASV,GAApC,mBAAQF,EAAR,KAAemB,EAAf,KAoGA,OAFAC,qBANa,WACXtD,QAAQC,IAAI,UACbsD,IAEE7D,MAAK,SAAAC,GAAQ,OAAEoD,EAAWpD,QAEd,IAGb,gCACE,2CACA,cAAC,EAAD,CAAcsC,QAASkB,EAASjB,MAAOA,IACvC,cAAC,EAAD,CACA7B,QAASA,EACTC,eAAgBA,EAChBC,aA9BiB,SAACiD,GACpB,IAAMC,EAAYD,EAAME,OAAO5C,MAAMF,cACrCsC,EAAeO,MA8Bb,2CACA,cAAC,EAAD,CAAYrC,QAASA,EACrBC,UAAWA,EACXC,WA9GuB,SAACkC,GAC1BP,EAAaO,EAAME,OAAO5C,QA8GxBS,YA5GqB,SAACiC,GACxBxD,QAAQC,IAAI,sCAAuCuD,EAAME,OAAO5C,OAChEkC,EAAWQ,EAAME,OAAO5C,QA2GtBU,KAzGoB,SAACgC,GACvBA,EAAMG,iBACN,IAAMC,EAAY,CAACjD,KAAMS,EAASF,OAAQG,GAC1C,GAAKhB,EAAQW,KAAI,SAAAN,GAAM,OAAEA,EAAOC,QAAME,SAASO,IAiC7C,GAAIyC,OAAOC,QAAP,UAAkB1C,EAAlB,2EAAoG,CACtG,IAAMrB,EAAKM,EAAQI,QAAO,SAAAQ,GAAC,OAAEA,EAAEN,OAASS,KAAS,GAAGrB,GACpDwD,EACUxD,EAAI6D,GACXlE,MAAK,SAAAC,GACJK,QAAQC,IAAI,kBAAmBN,GAC/ByD,EAAW,aAAD,OACKQ,EAAUjD,KADf,sBAGVoD,YAAW,WACTX,EAAW,QACV,KACHC,EAASjB,GACTW,EAAW1C,EAAQW,KAAI,SAAAC,GAAC,OAAIA,EAAElB,KAAOA,EAAKkB,EAAItB,MAC9CqD,EAAW,IACXC,EAAa,OAEde,OAAM,SAAAC,GACLb,EAAW,kBAAD,OACUQ,EAAUjD,KADpB,0CAGVoD,YAAW,WACTX,EAAW,QACV,KACHC,EAAST,GACTG,EAAW1C,EAAQI,QAAO,SAAAQ,GAAC,OAAIA,EAAElB,KAAOA,MACxCiD,EAAW,IACXC,EAAa,aA3DnBM,EACUK,GACPlE,MAAK,SAAAC,GAEFyD,EAAW,SAAD,OACCQ,EAAUjD,OAErBoD,YAAW,WACTX,EAAW,QACV,KACHC,EAASjB,GACTW,EAAW1C,EAAQ6D,OAAOvE,IAC1BqD,EAAW,IACXC,EAAa,OAGhBe,OAAM,SAAAC,GAELjE,QAAQC,IAAI,QAASgE,EAAMtE,SAASC,MACpCwD,EAAW,GAAD,OACLe,KAAKC,UAAUH,EAAMtE,SAASC,QAEnCmE,YAAW,WACTX,EAAW,QACV,KACHC,EAAST,GACTI,EAAW,IACXC,EAAa,UA4EjB,yCACA,cAAC,EAAD,CAAQ5C,QAASA,EAASuB,aApCT,SAAClB,GACpBV,QAAQC,IAAI,gBAAiBS,GACzBmD,OAAOC,QAAP,iBAAyBpD,EAAOC,KAAhC,QACF4C,EACQ7C,EAAOX,IACdL,MAAK,SAAAC,GACJoD,EAAW1C,EAAQI,QAAO,SAAAQ,GAAC,OAAEA,EAAElB,KAAOW,EAAOX,iBChLrDsE,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.32d4ef4f.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl =  '/api/persons' //'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  console.log('update', id, newObject);\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) =>{\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => {\n    console.log('remove promise', response);\n    return (response.data)\n  })\n}\n\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\nimport dataService from './services/data'\n\n\nconst Filter = ({persons, newSearchField, handleFilter}) =>{\n  console.log('filter after add persons', persons)\n  //const objs = persons.filter(person=>person.name.substring(0,newSearchField.length).toLowerCase()===newSearchField)\n  const objs = persons.filter(person=>person.name.toLowerCase().includes(newSearchField.toLowerCase()))\n  return(\n    <div>\n      filter shown with<input value={newSearchField} onChange={handleFilter}/>\n      {objs.map(e=><p key={e.name}>{e.name} {e.number}</p>)}\n    </div>\n  )\n}\nconst PersonForm = ({newName, newNumber, hNumChange, hNameChange, hAdd})=>{\n  return (\n    <form onSubmit={hAdd}>\n      <div>\n        name: <input \n        value={newName}\n        onChange={hNameChange}\n        />\n      </div>\n      <div>\n        number: <input \n        value={newNumber}\n        onChange={hNumChange}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\nconst Person = ({persons, handleDelete}) =>{\n  return(\n    <div>\n    {persons.map((person,i)=>\n    <DeleteButton key={i} person={person} handleDelete={()=>handleDelete(person)} />\n    )}\n    </div>\n  )\n}\nconst DeleteButton = ({person, handleDelete}) =>{\n  console.log('click delete', person);\n  return(\n    <p>\n      {person.name} {person.number}<button onClick={handleDelete}>delete</button>\n    </p>\n  )\n}\nconst Notification = ({ message, style}) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div style={style}>\n      {message}\n    </div>\n  )\n}\nconst App = () => {\n  const basic_style ={\n    color: 'green',\n    background: \"lightgrey\",\n    fontSize: 20,\n    borderStyle: \"solid\",\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n  const error_style ={\n    color: 'red',\n    background: \"lightgrey\",\n    fontSize: 20,\n    borderStyle: \"solid\",\n    borderRadiuss: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n  const [ persons, setPersons ] = useState([\n    /*{ name: 'Arto Hellas', number: '03-53555555'},\n    { name: 'Ada Lovelace', number: '39-44-5323523' },\n    { name: 'Dan Abramov', number: '12-43-234345' },\n    { name: 'Mary Poppendieck', number: '39-23-6423122' }*/\n  ]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearchField, setSearchField ] = useState('')\n  const [ Message, setMessage] = useState(null)\n  const [ style, setStyle] = useState(basic_style)\n\n  const handleNumberChange = (event) =>{\n    setNewNumber(event.target.value)\n  }\n  const handleNameChange = (event) => {\n    console.log('handleNameChange event target value', event.target.value)\n    setNewName(event.target.value)\n  }\n  const handleAddButtom = (event) =>{\n    event.preventDefault()\n    const newPerson = {name: newName, number: newNumber}\n    if (!persons.map(person=>person.name).includes(newName)){\n      dataService\n        .create(newPerson)\n        .then(response=>\n          {\n            setMessage(\n              `Added ${newPerson.name}`\n            )\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n            setStyle(basic_style)\n            setPersons(persons.concat(response))\n            setNewName('')\n            setNewNumber('')\n          }\n        )\n        .catch(error => {\n          // this is the way to access the error message\n          console.log('error', error.response.data)\n          setMessage(\n            `${JSON.stringify(error.response.data)}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          setStyle(error_style)\n          setNewName('')\n          setNewNumber('')\n        })\n    }\n    else{\n      //window.alert(`${newName} is already added to phonebook`)\n      if (window.confirm(`${newName} is already in the phonebook, replace the old number with the new one?`)) {\n        const id = persons.filter(e=>e.name === newName)[0].id\n        dataService\n          .update(id, newPerson)\n          .then(response=>{\n            console.log('update response', response);\n            setMessage(\n              `Number of ${newPerson.name} has been updated`\n            )\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n            setStyle(basic_style)\n            setPersons(persons.map(e => e.id !== id ? e : response))\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            setMessage(\n              `Information of ${newPerson.name} has already been removed from server`\n            )\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n            setStyle(error_style)\n            setPersons(persons.filter(e => e.id !== id))\n            setNewName('')\n            setNewNumber('')\n          })\n      }\n    }\n  }\n  const handleFilter = (event) =>{\n    const filterStr = event.target.value.toLowerCase()\n    setSearchField(filterStr)\n  }\n  const handleDelete = (person) =>{\n    console.log('handle delete', person);\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      dataService\n      .remove(person.id)\n      .then(response=>{\n        setPersons(persons.filter(e=>e.id !== person.id))\n        }\n      )\n    }\n  }\n  const hook = () => {\n    console.log('effect')\n   dataService\n    .getAll()\n    .then(response=>setPersons(response))\n  }\n  useEffect(hook,[])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={Message} style={style} />\n      <Filter\n      persons={persons}\n      newSearchField={newSearchField} \n      handleFilter={handleFilter} \n      />\n      <h2>Add a new</h2>\n      <PersonForm newName={newName} \n      newNumber={newNumber}\n      hNumChange={handleNumberChange}\n      hNameChange={handleNameChange}\n      hAdd={handleAddButtom}\n      />\n      <h2>Numbers</h2>\n      <Person persons={persons} handleDelete={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}